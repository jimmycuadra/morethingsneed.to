<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<title>morethingsneed.to</title>
	<link rel="shortcut icon" href="/favicon.ico" />
	<link rel="stylesheet" href="/stylesheets/reset.css" type="text/css" media="screen, projection" />
	<link rel="stylesheet" href="/stylesheets/screen.css" type="text/css" media="screen, projection" id="main_style" />
	<!--[if IE]>
		<link rel="stylesheet" href="/stylesheets/ie.css" type="text/css" media="screen" charset="utf-8" />
	<![endif]-->
	<%= javascript_include_tag 'http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js', 'jquery.cookie', 'stylesheet-switcher', 'form-defaults', 'vote', 'application' %>
</head>
<body>
	<div id="header">
		<a href="/" id="title-link" title="More Things Need To">More Things Need To</a>
		<%= render :partial => 'entries/add' %>
		
		<div id="nav">
			<%= link_to_unless ((params[:controller] == 'entries' && params[:action] && !(params.key?(:best) || params.key?(:worst) || params.key?(:oldest))), 'Newest', root_path) %> -
			<%= link_to_unless params.key?(:oldest), 'Oldest', root_path + '?oldest' %> -
			<%= link_to_unless params.key?(:best), 'Best', root_path + '?best' %> -
			<%= link_to_unless params.key?(:worst), 'Worst', root_path + '?worst' %> -
			<%= link_to_unless ((params[:controller] == 'about'), 'About', about_path) %> -
			<%= link_to_unless ((params[:controller] == 'contact'), 'Contact', contact_index_path) %>
			<span class="user">
				<% if current_user %>
					Logged in as <strong><%= current_user.username %></strong> - 
					<%= link_to_unless ((params[:controller] == 'users' && params[:action] == 'edit'), 'Account', profile_path) %> -
					<%= link_to 'Log out', logout_path %>
				<% else %>
					<%= link_to_unless ((params[:controller] == 'users' && params[:action] == 'new'), 'Register', register_path, :id => 'register') %> -
					<%= link_to_unless ((params[:controller] == 'user_sessions' && params[:action] == 'new'), 'Log in', login_path, :id => 'login') %>
				<% end %>					
			</span>				
		</div>	<!-- /nav -->
		
		<% if flash[:error] or flash[:success] -%>
		<div class="flash<%= ' success' if flash[:success] %>">
			<%= flash[:error] or flash[:success] %>
			<div class="close"></div>
			
			<% [@new_entry, @comment, @contact, @user, @user_session].each do |o| %>
			  <%= render_error_messages o if o %>
			<% end -%>
		</div>
		<% end -%>

		<div id="userbox-wrapper">
			<div id="register-box" class="userbox">
				<%= render :file => 'users/new' %>
			</div>

			<div id="login-box" class="userbox">
				<%= render :file => 'user_sessions/new' %>
			</div>
		</div>
	</div> <!-- /header -->
	
	<div id="content"<%= ' class="main"' if params[:controller] == 'entries' && params[:action] == 'index' %>>
		<%= yield %>
	</div> <!-- /content -->
	
	<div id="footer">
		<p>
		Announcing the necessity for increased<br />
		frequency of things occurring since 2009.<br />
		&copy; 2009 Jimmy Cuadra and Michael Chadwick.
		</p>
		<form id="style_switcher">
			<fieldset>
				<input type="submit" rel="/stylesheets/screen.css" id="desktop" value="Desktop" />
				<input type="submit" rel="/stylesheets/screen-mobile.css" id="mobile" value="Mobile" />
			</fieldset>
		</form>
	</div> <!-- /footer -->
	
	<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
	try {
	var pageTracker = _gat._getTracker("UA-5500916-10");
	pageTracker._trackPageview();
	} catch(err) {}</script>
</body>
</html>